<html>
<head>
<meta charset="utf-8">


<title>インライン関数 - Kotlin Programming Language</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="/assets/images/apple-touch-icon-144x144.png"/>
<link rel="stylesheet" href="/_assets/styles.css">


<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content="インライン関数 - Kotlin Programming Language"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://kotlinlang.org/docs/reference/inline-functions.html"/>
<meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description"
          content="Kotlin is a statically typed programming language for the JVM, Android and the browser, 100% interoperable with Java">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="インライン関数 - Kotlin Programming Language">
    <meta name="twitter:description"
          content="Kotlin is a statically typed programming language for the JVM, Android and the browser, 100% interoperable with Java">
<meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->    <script src="/_assets/default.js"></script>
    <script src="/_assets/common.js"></script>
</head>
<body>
<!--Google Analytics-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-88424767-1', 'auto');
  ga('send', 'pageview');

</script>
<!--/Google Analytics-->
<div class="global-layout">

<header class="global-header">

    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/">Kotlin</a>
<nav role="navigation" class="global-nav">

    <div class="nav-links">

            <a href="/docs/reference/"
               class="nav-item "
            >
                Learn
            </a>

            <a href="/contribute.html"
               class="nav-item "
            >
                Contribute
            </a>

            <a href="http://try.kotlinlang.org"
               class="nav-item "
            >
                Try Online
            </a>
    </div>


<div id="global-search" class=" global-search" title="Search">
    <div class="search-button">
        <div class="icon"></div>
    </div>
    <div class="search-box">
        <div class="gcse-searchbox-only"
             data-resultsUrl="/search.html"
             data-newWindow="false"
        ></div>
    </div>
</div></nav>        </div>
    </div>

    <div class="g-layout">
    </div>
</header>
    <div class="g-layout global-content">
    <div class="g-grid">

        <div class="g-12">
<nav role="navigation" class="docs-nav">
        <div class="nav-item-wrap">
                <a href="/docs/reference/" class="nav-item is_active">
                        <span class="nav-item-text">
                            リファレンス
                        </span>
                </a>
        </div>
        <div class="nav-item-wrap">
                <a href="/docs/tutorials/" class="nav-item">
                    <span class="nav-item-text">
                        Tutorials
                    </span>
                </a>

        </div>
        <div class="nav-item-wrap">
                <a href="/docs/videos.html" class="nav-item">
                    <span class="nav-item-text">
                        Videos
                    </span>
                </a>

        </div>
        <div class="nav-item-wrap">
                <a href="/docs/events.html" class="nav-item">
                    <span class="nav-item-text">
                        Events
                    </span>
                </a>

        </div>
        <div class="nav-item-wrap">
                <a href="/docs/resources.html" class="nav-item">
                    <span class="nav-item-text">
                        More resources
                    </span>
                </a>

        </div>
</nav>        </div>

        <aside class="g-3">
            <div id="reference-nav">
                    <nav role="navigation" class="side-tree-nav">
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="入門">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">入門</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/basic-syntax.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">基本的な構文</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/idioms.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">イディオム</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/coding-conventions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">コーディング規約</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="基本">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">基本</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/basic-types.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">基本の型</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/packages.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">パッケージ</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/control-flow.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">制御フロー</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/returns.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">returnとジャンプ</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="クラスとオブジェクト">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">クラスとオブジェクト</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/classes.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">クラスと継承</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/properties.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">プロパティとフィールド</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/interfaces.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">継承</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/visibility-modifiers.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">可視性修飾子</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/extensions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">拡張</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/data-classes.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">データクラス</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/generics.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">ジェネリクス</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/nested-classes.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">ネストされたクラス</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/enum-classes.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">列挙型クラス</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/object-declarations.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">オブジェクト</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/delegation.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">委譲</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/delegated-properties.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">委譲プロパティ</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _opened"
                 data-id="関数とラムダ">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">関数とラムダ</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/functions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">関数</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/lambdas.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">ラムダ</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active">
                                <div class="marker"></div>
                                <div class="text">インライン関数</div>
                            </div>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Other">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Other</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/multi-declarations.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Destructuring Declarations</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/collections.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Collections</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/ranges.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Ranges</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/typecasts.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Type Checks and Casts</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/this-expressions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">This expressions</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/equality.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Equality</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/operator-overloading.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Operator overloading</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/null-safety.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Null Safety</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/exceptions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Exceptions</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/annotations.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Annotations</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/reflection.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Reflection</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/type-safe-builders.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Type-Safe Builders</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Reference">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Reference</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/api/latest/jvm/stdlib/index.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">API Reference</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/grammar.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Grammar</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Java Interop">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Java Interop</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/java-interop.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Calling Java from Kotlin</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/java-to-kotlin-interop.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Calling Kotlin from Java</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="JavaScript">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">JavaScript</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/dynamic-type.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Dynamic Type</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/js-interop.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">JavaScript Interoperability</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/js-reflection.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">JavaScript Reflection</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Tools">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Tools</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/kotlin-doc.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Documenting Kotlin Code</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/using-maven.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Using Maven</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/using-ant.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Using Ant</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/using-gradle.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Using Gradle</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/kotlin-osgi.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin and OSGi</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="FAQ">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">FAQ</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/faq.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">FAQ</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/comparison-to-java.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Comparison to Java</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/comparison-to-scala.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Comparison to Scala</span>
                            </a>
                    </div>

            </div>
    </nav>


                <a href="/docs/kotlin-docs.pdf" class="reference-pdf-link">
                    <span class="icon"></span>
                    <span class="text">Full Kotlin Reference</span>
                </a>
            </div>
        </aside>

        <article role="main" class="page-content g-9">
<a href="https://github.com/dogwood008/kotlin-web-site-ja/edit/master/pages/docs/reference/inline-functions.md"
   class="page-link-to-github"
   target="_blank"
   title="Edit this page on GitHub">
        <i class="github-icon"></i>
        <span class="text">Edit Page</span>
</a>
                
<!--original
- --
type: doc
layout: reference
category: "Syntax"
title: "Inline Functions"
- --
-->
<h1 id="インライン関数">インライン関数</h1>
<!--original
# Inline Functions
-->
<p><a href="lambdas.html">高階関数</a>を使用すると、特定のランタイムペナルティを課せられます。各関数はオブジェクトであり、それはクロージャ、すなわち、関数の本体でアクセスされるそれらの変数をキャプチャします。メモリ割り当て（関数オブジェクトとクラス用の両方）と仮想呼び出しは、実行時のオーバーヘッドを招きます。</p>
<!--original
Using [higher-order functions](lambdas.html) imposes certain runtime penalties: each function is an object, and it captures a closure,
i.e. those variables that are accessed in the body of the function.
Memory allocations (both for function objects and classes) and virtual calls introduce runtime overhead.
-->
<p>しかし、多くの場合、オーバーヘッドのこの種のラムダ式をインライン化することによって解消することができると思われます。以下に示す関数は、このような状況の良い例です。すなわち、<code>lock()</code> 関数は、簡単に呼び出し箇所でインライン化することができました。次のケースを考えてみます。</p>
<!--original
But it appears that in many cases this kind of overhead can be eliminated by inlining the lambda expressions.
The functions shown above are good examples of this situation. I.e., the `lock()` function could be easily inlined at call-sites.
Consider the following case:
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">lock(l) { foo() }
</code></pre>
<!--original
``` kotlin
lock(l) { foo() }
```
-->
<p>パラメータやコールの生成のために関数オブジェクトを作成する代わりに、コンパイラは次のコードを放出する可能性があります：</p>
<!--original
Instead of creating a function object for the parameter and generating a call, the compiler could emit the following code
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">l.lock()
try {
  foo()
}
finally {
  l.unlock()
}
</code></pre>
<!--original
``` kotlin
l.lock()
try {
  foo()
}
finally {
  l.unlock()
}
```
-->
<p>それは我々が当初から欲しかったものではないですか？</p>
<!--original
Isn't it what we wanted from the very beginning?
-->
<p>コンパイラがこれをできるようにするために、 <code>inline</code> 修飾子で <code>lock()</code> 関数をマークする必要があります：</p>
<!--original
To make the compiler do this, we need to mark the `lock()` function with the `inline` modifier:
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">inline fun lock&lt;T&gt;(lock: Lock, body: () -&gt; T): T {
  // ...
}
</code></pre>
<!--original
``` kotlin
inline fun lock<T>(lock: Lock, body: () -> T): T {
  // ...
}
```
-->
<p><code>inline</code> 修飾子は、関数自体やそれに渡されたラムダの両方に影響を与えます。それらのすべては、呼び出し箇所の中でインライン化されます。</p>
<!--original
The `inline` modifier affects both the function itself and the lambdas passed to it: all of those will be inlined
into the call site.
-->
<p>インライン化では生成されるコードが大きくなる可能性がありますが、合理的な方法で（大きな関数をインライン化しないで）実行すると、特にループ内の 「メガモーフィック (megamorphic)」な呼び出し箇所でパフォーマンスが向上します。</p>
<!--original
Inlining may cause the generated code to grow, but if we do it in a reasonable way (do not inline big functions)
it will pay off in performance, especially at "megamorphic" call-sites inside loops.
-->
<h2 id="noinline">noinline</h2>
<!--original
## noinline
-->
<p>インライン関数に渡されたラムダのうちのいくつかだけをインライン関数にしたい場合は、関数パラメータのいくつかに <code>noinline</code> 修飾子を付けることができます：</p>
<!--original
In case you want only some of the lambdas passed to an inline function to be inlined, you can mark some of your function
parameters with the `noinline` modifier:
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">inline fun foo(inlined: () -&gt; Unit, noinline notInlined: () -&gt; Unit) {
  // ...
}
</code></pre>
<!--original
``` kotlin
inline fun foo(inlined: () -> Unit, noinline notInlined: () -> Unit) {
  // ...
}
```
-->
<p>Inlinableラムダは、インライン関数内でのみ呼び出すことができます。または、インライン展開可能な引数として渡すこともできますが、 <code>noinline</code> は、好きなように操作できます。例えば、フィールドに保持したり、誰かに渡したり等。</p>
<!--original
Inlinable lambdas can only be called inside the inline functions or passed as inlinable arguments,
but `noinline` ones can be manipulated in any way we like: stored in fields, passed around etc.
-->
<p>インライン関数にインライナブル関数パラメータがなく、<a href="#reified-type-parameters">具体化型パラメータ</a>が指定されていない場合、コンパイラは警告を発します。このような関数のインライン展開は有益ではないためです（インライン展開が必要な場合は警告を抑制できます）。</p>
<!--original
Note that if an inline function has no inlinable function parameters and no
[reified type parameters](#reified-type-parameters), the compiler will issue a warning, since inlining such functions is
 very unlikely to be beneficial (you can suppress the warning if you are sure the inlining is needed).
-->
<h2 id="非局所リターン">非局所リターン</h2>
<!--original
## Non-local returns
-->
<p>Kotlinでは、名前付き関数または無名関数を終了するには、通常、ラベル無し <code>return</code> のみを使用することができます。これは、ラムダを終了するには<a href="returns.html#return-at-labels">ラベル</a>を使用しなければならず、ラムダが自身を内包する関数からの <code>return</code> を作ることができないため、ラムダ内での裸のリターンは禁止されていることを意味します。</p>
<!--original
In Kotlin, we can only use a normal, unqualified `return` to exit a named function or an anonymous function.
This means that to exit a lambda, we have to use a [label](returns.html#return-at-labels), and a bare `return` is forbidden
inside a lambda, because a lambda can not make the enclosing function return:
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">fun foo() {
  ordinaryFunction {
     return // エラー: `foo` をここで return することはできない
  }
}
</code></pre>
<!--original
``` kotlin
fun foo() {
  ordinaryFunction {
     return // ERROR: can not make `foo` return here
  }
}
```
-->
<p>しかし、ラムダがインライン化されるために渡された関数の場合は、リターンも同様にインライン化することができ、それが許可されています。</p>
<!--original
But if the function the lambda is passed to is inlined, the return can be inlined as well, so it is allowed:
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">fun foo() {
  inlineFunction {
    return // OK: ラムダはインライン
  }
}
</code></pre>
<!--original
``` kotlin
fun foo() {
  inlineFunction {
    return // OK: the lambda is inlined
  }
}
```
-->
<p>（ラムダに位置するが、内包する関数から抜ける）このようなリターンは、 <em>非局所リターン</em> と呼ばれています。私たちは、インライン関数がしばしば内包するこのようなループの構造に慣れています。</p>
<!--original
Such returns (located in a lambda, but exiting the enclosing function) are called *non-local* returns. We are used to
this sort of constructs in loops, which inline functions often enclose:
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">fun hasZeros(ints: List&lt;Int&gt;): Boolean {
  ints.forEach {
    if (it == 0) return true // hasZeros から return する
  }
  return false
}
</code></pre>
<!--original
``` kotlin
fun hasZeros(ints: List<Int>): Boolean {
  ints.forEach {
    if (it == 0) return true // returns from hasZeros
  }
  return false
}
```
-->
<p>インライン関数の中には、渡されたラムダを、関数本体から直接ではなく、ローカルオブジェクトやネストされた関数などの別の実行コンテキストからのパラメータとして呼び出すものがあります。このような場合には、非局所制御フローもラムダでは許可されません。それを示すために、ラムダパラメータを <code>crossinline</code> 修飾子でマークする必要があります</p>
<!--original
Note that some inline functions may call the lambdas passed to them as parameters not directly from the function body,
but from another execution context, such as a local object or a nested function. In such cases, non-local control flow
is also not allowed in the lambdas. To indicate that, the lambda parameter needs to be marked with
the `crossinline` modifier:
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">inline fun f(crossinline body: () -&gt; Unit) {
    val f = object: Runnable {
        override fun run() = body()
    }
    // ...
}
</code></pre>
<!--original
``` kotlin
inline fun f(crossinline body: () -> Unit) {
    val f = object: Runnable {
        override fun run() = body()
    }
    // ...
}
```

-->
<p><code>break</code> と <code>continue</code> はインライン化されたラムダではまだ利用できませんが、我々はそれらをサポートすることを計画しています。</p>
<!--original
> `break` and `continue` are not yet available in inlined lambdas, but we are planning to support them too
-->
<h2 id="具体化型パラメータ-reified-type-parameters">具体化型パラメータ (Reified type parameters)</h2>
<!--original
## Reified type parameters
-->
<p>時にはパラメータとして渡された型にアクセスする必要があります。</p>
<!--original
Sometimes we need to access a type passed to us as a parameter:
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">fun &lt;T&gt; TreeNode.findParentOfType(clazz: Class&lt;T&gt;): T? {
    var p = parent
    while (p != null &amp;&amp; !clazz.isInstance(p)) {
        p = p?.parent
    }
    @Suppress("UNCHECKED_CAST")
    return p as T
}
</code></pre>
<!--original
``` kotlin
fun <T> TreeNode.findParentOfType(clazz: Class<T>): T? {
    var p = parent
    while (p != null && !clazz.isInstance(p)) {
        p = p?.parent
    }
    @Suppress("UNCHECKED_CAST")
    return p as T
}
```
-->
<p>ここでは、ツリーをたどってリフレクションを使用して、ノードに特定のタイプがあるかどうかを確認します。全く問題はないのですが、呼び出し箇所はそれほど美味しくなりません：</p>
<!--original
Here, we walk up a tree and use reflection to check if a node has a certain type.
It’s all fine, but the call site is not very pretty:
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">myTree.findParentOfType(MyTreeNodeType::class.java)
</code></pre>
<!--original
``` kotlin
myTree.findParentOfType(MyTreeNodeType::class.java)
```
-->
<p>私たちが実際にしたいのはこの関数に型を渡すだけ、すなわち、このように呼び出すだけです：</p>
<!--original
What we actually want is simply pass a type to this function, i.e. call it like this:
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">myTree.findParentOfType&lt;MyTreeNodeType&gt;()
</code></pre>
<!--original
``` kotlin
myTree.findParentOfType<MyTreeNodeType>()
```
-->
<p>これを有効にするには、インライン関数が <em>具体化型パラメータ</em> をサポートするので、私たちはこのように書くことができます：</p>
<!--original
To enable this, inline functions support *reified type parameters*, so we can write something like this:
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">inline fun &lt;reified T&gt; TreeNode.findParentOfType(): T? {
    var p = parent
    while (p != null &amp;&amp; p !is T) {
        p = p?.parent
    }
    return p as T
}
</code></pre>
<!--original
``` kotlin
inline fun <reified T> TreeNode.findParentOfType(): T? {
    var p = parent
    while (p != null && p !is T) {
        p = p?.parent
    }
    return p as T
}
```
-->
<p>私たちは <code>reified</code> 修飾子で型パラメータを修飾しました。これで、関数内でアクセス可能になり、これは通常のクラスと同じように機能します。関数はインライン化されているので、リフレクションは必要ありません。 <code>!is</code> や <code>as</code> のような通常の演算子が動作するようになります。また、前述したようなやりかたで呼び出すことができます：<code>myTree.findParentOfType&lt;MyTreeNodeType&gt;()</code></p>
<!--original
We qualified the type parameter with the `reified` modifier, now it’s accessible inside the function,
almost as if it were a normal class. Since the function is inlined, no reflection is needed, normal operators like `!is`
and `as` are working now. Also, we can call it as mentioned above: `myTree.findParentOfType<MyTreeNodeType>()`.
-->
<p>リフレクションは多くの場合に必要とされないかもしれませんが、まだ具体化型パラメータでそれを使用することができます：</p>
<!--original
Though reflection may not be needed in many cases, we can still use it with a reified type parameter:
-->
<pre><code class="code _highlighted" data-lang="text/x-kotlin">inline fun &lt;reified T&gt; membersOf() = T::class.members

fun main(s: Array&lt;String&gt;) {
  println(membersOf&lt;StringBuilder&gt;().joinToString("\n"))
}
</code></pre>
<!--original
``` kotlin
inline fun <reified T> membersOf() = T::class.members

fun main(s: Array<String>) {
  println(membersOf<StringBuilder>().joinToString("\n"))
}
```
-->
<p>通常の機能（インラインとしてマークされていない）は具体化パラメータをもつことはできません。実行時表現を持たない型（例えば、非reified型パラメータや <code>Nothing</code> のような架空の型）は、reified 型のパラメータの引数として使用できません。</p>
<!--original
Normal functions (not marked as inline) can not have reified parameters.
A type that does not have a run-time representation (e.g. a non-reified type parameter or a fictitious type like `Nothing`)
can not be used as an argument for a reified type parameter.
-->
<p>低レベルの説明については、<a href="https://github.com/JetBrains/kotlin/blob/master/spec-docs/reified-type-parameters.md">仕様書</a>を参照してください。</p>
<!--original
For a low-level description, see the [spec document](https://github.com/JetBrains/kotlin/blob/master/spec-docs/reified-type-parameters.md).
-->

        </article>
    </div>

    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript">
    <!--
    $(function() {
      $("*").contents().filter(function() {
        return this.nodeType==8 && this.nodeValue.match(/^original/);
      }).each(function(i, e) {
        var tooltips = e.nodeValue.replace(/^original *[\n\r]|[\n\r]$/g, '');
        $(this).prev().attr('title', tooltips);
      });
    });
    -->
    </script>

    <script src="/_assets/reference.js"></script>
    </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="terms-copyright">
                &copy; 2000&ndash;2016 JetBrains. All rights reserved
            </div>

            <div class="terms-sponsor">
                Sponsored and developed by <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains" target="_blank">JetBrains</a>
            </div>
        </div>
    </div>

</footer></body>
</html>